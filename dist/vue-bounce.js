function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var vueBounce=function(){function vueBounce(){_classCallCheck(this,vueBounce);this._startPoint=null;this._handleStart=null;this._handleMove=null;this._handleEnd=null}_createClass(vueBounce,[{key:"install",value:function install(Vue){var _this=this;var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},name=_ref.name;var directiveName=name||"bounce";var directive=function directive(el,binding){if(_this._handleStart===null||_this._handleMove===null||_this._handleEnd===null){_this._handleStart=_this._touchstartEvent.bind(_this,_this);_this._handleMove=_this._touchmoveEvent.bind(_this,_this,el);_this._handleEnd=_this._touchendEvent.bind(_this,_this)}if(binding.value){el.removeEventListener("touchstart",_this._handleStart);window.removeEventListener("touchmove",_this._handleMove);window.removeEventListener("touchend",_this._handleEnd);return void 0}el.addEventListener("touchstart",_this._handleStart);window.addEventListener("touchmove",_this._handleMove,{passive:false});window.addEventListener("touchend",_this._handleEnd)};Vue.directive(directiveName,directive.bind(this))}},{key:"_getScrollTop",value:function _getScrollTop(el){return el.scrollTop}},{key:"_getScrollHeight",value:function _getScrollHeight(el){return el.scrollHeight}},{key:"_getClientHeight",value:function _getClientHeight(el){return el.clientHeight}},{key:"_getPoint",value:function _getPoint(e){return{x:e.touches?e.touches[0].pageX:e.clientX,y:e.touches?e.touches[0].pageY:e.clientY}}},{key:"_preventDefault",value:function _preventDefault(e){if(e.cancelable)e.preventDefault()}},{key:"_touchstartEvent",value:function _touchstartEvent(context,e){context._startPoint=context._getPoint(e)}},{key:"_touchmoveEvent",value:function _touchmoveEvent(context,el,e){if(!context._startPoint)return void 0;var curPoint=context._getPoint(e);var moveY=curPoint.y-context._startPoint.y;var scrollTop=context._getScrollTop(el);if(moveY>0&&scrollTop<=0){context._preventDefault(e);return void 0}var scrollHeight=context._getScrollHeight(el);var clientHeight=context._getClientHeight(el);var toBottom=scrollHeight-clientHeight-scrollTop;if(moveY<0&&toBottom<=0)context._preventDefault(e)}},{key:"_touchendEvent",value:function _touchendEvent(context,e){context._startPoint=null}}]);return vueBounce}();export default new vueBounce;